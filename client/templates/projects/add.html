<template name="projectAdd">
	{{> navigation}}

	<div class="container card-panel add-project">
		<h4 class="teal form-header">Add a matter</h4>
		<div class="row form-container">

			<!-- Form starts>
			{{#autoForm id="insertClientForm" doc=this type="method" meteormethod='saveClientData' schema='clientSchema'}}
		<div>{{> afFieldInput name="name"}}</div>
        <div>{{> afFieldInput  type='xautocomplete' formid="insertClientForm" name='clientIds' call='clients' xmultiple=true fieldref='name' reference='Clients' renderfunction='renderClients'}}</div>
        <button class="btn btn-primary" type="submit">Insert</button>
    {{/autoForm}}-->

			{{#autoForm id="insertProjectForm" class="col s12" doc=this type="method" meteormethod='saveProjectData' schema='projectSchema'}}
			<div class="row">
-				<div class="input-field col l8 m6 s12">
-					{{> afFieldInput name="name" id="project__title" class="check_validation"}}
-					<label for="project__title">Title</label>
					{{#if afFieldIsInvalid name='name'}}
    						<span class="help-block">{{{afFieldMessage name='name'}}}</span>
    					{{/if}}
-				</div>
				<div class="input-field col l4 m6 s12">
					{{> afFieldInput name="suitno" id="project__suitno"}}
					<label for="project__suitno">Suit No</label>
					{{#if afFieldIsInvalid name='suitno'}}
						<span class="help-block">{{{afFieldMessage name='suitno'}}}</span>
					{{/if}}
				</div>
			</div>
			
			<div class="row">
				<div class="input-field col l8 m6 s12">			
					<label for="project__clients" class="active">Clients</label>
					{{> afFieldInput  type='xautocomplete' formid="insertProjectForm" name='clientIds' call='clients' xmultiple=true fieldref='name' reference='Clients' renderfunction='renderDefaultAutocomplete' callbackfunction='populateReminders'}}
				</div>
				<div class="col l4 m6 s12" id='attended_by'>
			        {{> afQuickField name='type' options='allowed'}}
				</div>
			</div>
			
			<div class="row">
		      <div class="input-field col s12">
		        {{> afQuickField name='description' rows='6' class='materialize-textarea'}}
		      </div>
	    	</div>
	    	<div class="row">
	    		<div class = "row m12">
					<div class="input-field col s12 m6">
						{{> afFieldInput  type='xautocomplete' formid="insertProjectForm" name='lawyerIds' call='lawyers' xmultiple=true fieldref='name' reference='Lawyers' renderfunction='renderDefaultAutocomplete' id="project__lawyer"}}
						<label for="project__laywer" class="active">Lawyers</label>
						{{#if afFieldIsInvalid name='lawyerIds'}}
							<span class="help-block">{{{afFieldMessage name='lawyerIds'}}}</span>
						{{/if}}
					</div>

					<div class="input-field col s12 m6">
						{{> afFieldInput  type='xautocomplete' formid="insertProjectForm" name='courtId' call='courts' fieldref='name' reference='Courts' renderfunction='renderDefaultAutocomplete' id="project__court"}}
						<label for="project__court" class="active">Court</label>
						{{#if afFieldIsInvalid name='courtId'}}
							<span class="help-block">{{{afFieldMessage name='courtId'}}}</span>
						{{/if}}
					</div>
				</div>
				<div class = "row m12">	
					<div class="input-field col s12 m6">
						{{> afFieldInput name="followup"  id="followup_date"}}
						<label for="followup_date" class="active">Followup Date</label>
						{{#if afFieldIsInvalid name='followup'}}
							<span class="help-block">{{{afFieldMessage name='followup'}}}</span>
						{{/if}}
					</div>
					
					<div class="input-field col s12 m6">
						{{> afFieldInput name="statute_of_limitation"  id="statute_of_limitation"}}
						<label for="statute_of_limitation" class="active">Statute of Limitation</label>
						{{#if afFieldIsInvalid name='statute_of_limitation'}}
							<span class="help-block">{{{afFieldMessage name='statute_of_limitation'}}}</span>
						{{/if}}
					</div>
				</div>
				<div class="row m12">
					<h5>Billing</h5>
					<div class="input-field col s12 m6">
						{{> afFieldInput name="bill_retainer"  id="bill_retainer"}}
						<label for="bill_retainer">Retainer</label>
					</div>
					
					<div class="input-field col s12 m6">
						{{> afFieldInput name="bill_hearing_partner"  id="bill_hearing_partner"}}
						<label for="bill_hearing_partner">bill_hearing_partner</label>
					</div>
					
					<div class="input-field col s12 m6">
						{{> afFieldInput name="bill_hearing_sr_associate"  id="bill_hearing_sr_associate"}}
						<label for="bill_hearing_sr_associate">bill_hearing_sr_associate</label>
					</div>
					
					<div class="input-field col s12 m6">
						{{> afFieldInput name="bill_hearing_associate"  id="bill_hearing_associate"}}
						<label for="bill_hearing_associate">bill_hearing_associate</label>
					</div>
				</div>
				
				<div class="row m12">
					<h5>Reminders</h5>
					{{> afQuickField name='reminders' template='series'}}
				</div>

				<div class="row m12">
					<h5>Labels</h5>
					{{> afQuickField name='labelIds' multiple='true'}}
				</div>
				
			</div>
			<button class="addProj waves-effect waves-light btn" type="submit">Insert</button>
			<a class="waves-effect waves-teal btn-flat" href="/projects" style="position: absolute;">CANCEL</a>
			{{/autoForm}}
			<!-- Form ends -->

		</div>	
	</div>
</template>
